# AI 协作指南 (Instructions)

本文件定义 AI 助手在项目开发过程中的协作准则和行为规范。

---

## 1. 会话初始化

每次新会话开始时，AI 助手必须建立上下文：
1. **必读**: `start-here.md`, `project/context.md`, `project/tech-stack.md`。
2. **检查**: `project/known-issues.md` 了解历史痛点。
3. **确认**: 当前任务的目标、约束与风险。

---

## 2. 编码协作规范

- **风格规约**: 严格遵循 `core/stack-specs/` 下对应语言的规范。
- **核心要求**: 显式指定 UTF-8 编码，严禁省略。详细示例见 [core/examples.md](examples.md)。
- **一致性**: 保持与现有代码库的架构设计和命名风格一致。

---

## 3. 任务执行流程

### 3.1 任务周期
1. **任务前**: 理解需求，检查 `bug-prevention.md`，制定增量计划。
2. **执行中**: **开发 → 验证 → 继续**。每步必须闭环，严禁一次性修改过多文件。
3. **任务后**: 运行合规检查脚本，确保无新引入的警告或错误。

### 3.2 增量验证
> 始终保持最小修改集，通过频繁的测试验证来保证系统稳定性。

---

## 4. 沟通与确认

- **问题澄清**: 遇到需求模糊、边界不清晰或潜在冲突时，必须主动询问。
- **方案权衡**: 提出方案时，应简述选择理由及潜在的风险/权衡。
- **进度报告**: 复杂任务应分阶段同步进度，并标注当前遇到的阻碍。

---

## 5. 行为边界与风险控制

### 5.1 自主性原则
- **L3 (直接执行)**: 代码生成、重构、格式化、添加注释。
- **L2 (执行后通知)**: 创建非敏感文件、更新非核心配置。
- **L1 (询问后执行)**: **删除文件**、修改项目核心依赖、执行生产环境操作。
- **L0 (严禁执行)**: 访问/存储敏感凭据、未授权的金融交易、修改安全策略。

详细的能力清单与边界定义见 [core/workflows/ai-boundaries.md](workflows/ai-boundaries.md)。

---

## 6. 错误处理与预防

1. **发现 Bug**: 记录现象 → 定位根源 → 修复 → 更新 `bug-prevention.md`。
2. **不确定时**: 优先选择保守方案，并明确标注假设条件。

---

*此文件为通用引擎规则，禁止包含任何项目特定信息*
*协议版本: 2.1.0*
